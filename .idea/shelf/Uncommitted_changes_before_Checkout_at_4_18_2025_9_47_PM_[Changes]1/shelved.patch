Index: app/src/main/java/com/example/myplantcare/fragments/ScheduleFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.myplantcare.fragments;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModel;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.util.Pair;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.myplantcare.R;\r\nimport com.example.myplantcare.adapters.DayAdapter;\r\nimport com.example.myplantcare.adapters.ScheduleAdapter;\r\nimport com.example.myplantcare.data.responses.ScheduleWithMyPlantInfo;\r\nimport com.example.myplantcare.models.DayModel;\r\nimport com.example.myplantcare.models.ScheduleModel;\r\nimport com.example.myplantcare.models.TaskModel;\r\nimport com.example.myplantcare.viewmodels.ScheduleViewModel;\r\nimport com.google.android.material.datepicker.MaterialDatePicker;\r\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class ScheduleFragment extends Fragment {\r\n\r\n    private RecyclerView recyclerViewDays, recyclerViewScheduleUncompleted, recyclerViewScheduleCompleted;\r\n    private DayAdapter dayAdapter;\r\n    private ScheduleAdapter scheduleAdapter;\r\n    private ScheduleViewModel scheduleViewModel;\r\n    private List<DayModel> dayList;\r\n    private List<Pair<String, List<ScheduleWithMyPlantInfo>>> scheduleListUncompleted, scheduleListCompleted;\r\n    private ImageView btnOpenDatePicker;\r\n    private FloatingActionButton fab;\r\n//    List<Pair<String, List<ScheduleWithMyPlantInfo>>> todaySchedulesList;\r\n\r\n\r\n    // Tạo danh sách ngày\r\n    private List<DayModel> generateDays() {\r\n        List<DayModel> days = new ArrayList<>();\r\n        String[] weekdays = {\"CN\",\"Th 2\", \"Th 3\", \"Th 4\", \"Th 5\", \"Th 6\", \"Th 7\"};\r\n        Calendar calendar = Calendar.getInstance();\r\n        int today = calendar.get(Calendar.DAY_OF_MONTH);\r\n\r\n        for (int i = -3; i <= 3; i++) {\r\n            calendar.add(Calendar.DAY_OF_MONTH, i);\r\n            int day = calendar.get(Calendar.DAY_OF_MONTH);\r\n            String dayOfWeek = weekdays[calendar.get(Calendar.DAY_OF_WEEK) - 1];\r\n            boolean isToday = (day == today);\r\n            days.add(new DayModel(dayOfWeek, day, isToday));\r\n            calendar.add(Calendar.DAY_OF_MONTH, -i); // Reset lại ngày\r\n        }\r\n        return days;\r\n    }\r\n\r\n    // Tạo danh sách lịch trình mẫu\r\n    private List<ScheduleModel> generateSchedules() {\r\n        List<ScheduleModel> schedules = new ArrayList<>();\r\n\r\n        List<TaskModel> taskList1 = new ArrayList<>();\r\n        taskList1.add(new TaskModel(\"Cây A - 8:00 AM - Ban công\", false));\r\n        taskList1.add(new TaskModel(\"Cây B - 9:30 AM - Phòng khách\", false));\r\n\r\n        List<TaskModel> taskList2 = new ArrayList<>();\r\n        taskList2.add(new TaskModel(\"Cây C - 10:00 AM - Sân vườn\", false));\r\n        taskList2.add(new TaskModel(\"Cây D - 11:30 AM - Ban công\", false));\r\n\r\n//        schedules.add(new ScheduleModel(\"Tưới nước\"));\r\n//        schedules.add(new ScheduleModel(\"Bón phân\"));\r\n\r\n        return schedules;\r\n    }\r\n\r\n\r\n    private void openDatePicker() {\r\n        MaterialDatePicker<Long> datePicker =\r\n                MaterialDatePicker.Builder.datePicker()\r\n                        .setTitleText(\"Chọn ngày\")\r\n                        .setSelection(MaterialDatePicker.todayInUtcMilliseconds())\r\n                        .build();\r\n\r\n        datePicker.addOnPositiveButtonClickListener(selection -> {\r\n            // Chuyển đổi timestamp sang ngày tháng\r\n            Calendar calendar = Calendar.getInstance();\r\n            calendar.setTimeInMillis(selection);\r\n            int day = calendar.get(Calendar.DAY_OF_MONTH);\r\n            int month = calendar.get(Calendar.MONTH) + 1; // Tháng tính từ 0\r\n            int year = calendar.get(Calendar.YEAR);\r\n\r\n            // Cập nhật TextView hoặc RecyclerView với ngày đã chọn\r\n            String selectedDate = day + \"/\" + month + \"/\" + year;\r\n            Toast.makeText(getContext(), \"Ngày đã chọn: \" + selectedDate, Toast.LENGTH_SHORT).show();\r\n\r\n            // Đóng date picker\r\n            datePicker.dismiss();\r\n        });\r\n\r\n        datePicker.show(getParentFragmentManager(), \"DATE_PICKER\");\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_schedule, container, false);\r\n        initContents(view);\r\n        setupViewModel();\r\n        observeViewModel();\r\n        fab.setOnClickListener(v -> {\r\n            showAddScheduleDialog();\r\n                });\r\n\r\n        recyclerViewDays.setLayoutManager(new LinearLayoutManager(getContext(), LinearLayoutManager.HORIZONTAL, false));\r\n        dayList = generateDays();\r\n        dayAdapter = new DayAdapter(dayList);\r\n        recyclerViewDays.setAdapter(dayAdapter);\r\n\r\n        recyclerViewScheduleUncompleted.setLayoutManager(new LinearLayoutManager(getContext()));\r\n        Log.d(\"ScheduleFragment\", \"Size cv can lam o onCreateView: \" + scheduleListUncompleted.size());\r\n        scheduleAdapter = new ScheduleAdapter(scheduleListUncompleted);\r\n        recyclerViewScheduleUncompleted.setAdapter(scheduleAdapter);\r\n\r\n        recyclerViewScheduleCompleted.setLayoutManager(new LinearLayoutManager(getContext()));\r\n\r\n        scheduleAdapter = new ScheduleAdapter(scheduleListCompleted);\r\n        recyclerViewScheduleCompleted.setAdapter(scheduleAdapter);\r\n\r\n        btnOpenDatePicker.setOnClickListener(v -> openDatePicker());\r\n        return view;\r\n    }\r\n\r\n    private void observeViewModel() {\r\n        scheduleViewModel.todaySchedules.observe(getViewLifecycleOwner(), groupedSchedules  -> {\r\n            if (groupedSchedules == null || groupedSchedules.isEmpty()) {\r\n                Toast.makeText(getContext(), \"Không có công việc hôm nay\", Toast.LENGTH_SHORT).show();\r\n                scheduleListUncompleted.clear();\r\n                scheduleAdapter.notifyDataSetChanged();\r\n                return;\r\n            }\r\n\r\n            scheduleListUncompleted.clear();\r\n\r\n            for (Map.Entry<String, List<ScheduleWithMyPlantInfo>> entry : groupedSchedules.entrySet()) {\r\n                scheduleListUncompleted.add(new Pair<>(entry.getKey(), entry.getValue()));\r\n            }\r\n            Log.d(\"ScheduleFragment\", \"Size cv can lam o observeViewModel: \" + scheduleListUncompleted.size());\r\n            scheduleAdapter.notifyDataSetChanged();\r\n        });\r\n        scheduleViewModel.errorMessage.observe(getViewLifecycleOwner(), message -> {\r\n            if (message != null) {\r\n                Toast.makeText(getContext(), message, Toast.LENGTH_SHORT).show();\r\n                Log.d(\"ScheduleFragment\", \"Lỗi: \" + message);\r\n            }\r\n        });\r\n\r\n        scheduleViewModel.isLoading.observe(getViewLifecycleOwner(), isLoading -> {\r\n            // Có thể thêm ProgressBar sau nếu bạn muốn\r\n            Log.d(\"ScheduleFragment\", \"Đang tải: \" + isLoading);\r\n        });\r\n    }\r\n\r\n    private void setupViewModel() {\r\n        String userId = \"eoWltJXzlBtC8U8QZx9G\";  //tam thoi de hard code\r\n        scheduleViewModel = new ViewModelProvider(this, new ViewModelProvider.Factory() {\r\n            @NonNull\r\n            @Override\r\n            public <T extends ViewModel> T create(@NonNull Class<T> modelClass) {\r\n                return (T) new ScheduleViewModel(userId);\r\n            }\r\n        }).get(ScheduleViewModel.class);\r\n    }\r\n\r\n    private void showAddScheduleDialog() {\r\n        AddScheduleDialogFragment addScheduleDialogFragment = new AddScheduleDialogFragment();\r\n        addScheduleDialogFragment.show(getParentFragmentManager(), \"ADD_SCHEDULE_DIALOG\");\r\n    }\r\n\r\n    private void initContents(View view) {\r\n        recyclerViewDays = view.findViewById(R.id.recyclerViewDays);\r\n        recyclerViewScheduleUncompleted = view.findViewById(R.id.recyclerViewScheduleUncompleted);\r\n        recyclerViewScheduleCompleted = view.findViewById(R.id.recyclerViewScheduleCompleted);\r\n        btnOpenDatePicker = view.findViewById(R.id.btnOpenDatePicker);\r\n        fab = view.findViewById(R.id.fab_add_schedule);\r\n        scheduleListUncompleted = new ArrayList<>();\r\n        scheduleListCompleted = new ArrayList<>();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/myplantcare/fragments/ScheduleFragment.java b/app/src/main/java/com/example/myplantcare/fragments/ScheduleFragment.java
--- a/app/src/main/java/com/example/myplantcare/fragments/ScheduleFragment.java	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
+++ b/app/src/main/java/com/example/myplantcare/fragments/ScheduleFragment.java	(date 1744971317936)
@@ -134,8 +134,8 @@
 
         recyclerViewScheduleCompleted.setLayoutManager(new LinearLayoutManager(getContext()));
 
-        scheduleAdapter = new ScheduleAdapter(scheduleListCompleted);
-        recyclerViewScheduleCompleted.setAdapter(scheduleAdapter);
+        ScheduleAdapter completeScheduleAdapter = new ScheduleAdapter(scheduleListCompleted);
+        recyclerViewScheduleCompleted.setAdapter(completeScheduleAdapter);
 
         btnOpenDatePicker.setOnClickListener(v -> openDatePicker());
         return view;
Index: app/src/main/res/layout/activity_care_instruction.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:id=\"@+id/care_instruction_layout\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"#F5F5F5\">\r\n\r\n    <!-- Thanh tiêu đề -->\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"207dp\"\r\n        android:gravity=\"center_vertical\"\r\n        android:orientation=\"horizontal\"\r\n        android:paddingStart=\"16dp\"\r\n        android:paddingTop=\"16dp\"\r\n        android:paddingEnd=\"16dp\"\r\n        android:paddingBottom=\"8dp\">\r\n\r\n        <!-- Spinner \"Chọn cây của bạn\" -->\r\n\r\n        <ImageView\r\n            android:id=\"@+id/backButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginEnd=\"8dp\"\r\n            android:contentDescription=\"Quay lại\"\r\n            android:src=\"@drawable/arrow_notification\" />\r\n\r\n        <Spinner\r\n            android:id=\"@+id/plantCategorySpinner\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n            android:entries=\"@array/plant_categories\"\r\n            android:prompt=\"@string/choose_plant_category\"\r\n            android:spinnerMode=\"dropdown\" />\r\n\r\n        <ImageView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginStart=\"8dp\"\r\n            android:contentDescription=\"Dropdown\"/>\r\n    </LinearLayout>\r\n\r\n    <!-- CardView chứa thông tin cây -->\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        app:cardCornerRadius=\"20dp\"\r\n        app:cardBackgroundColor=\"#F0FDF4\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"16dp\">\r\n\r\n            <TextView\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Indoor\"\r\n                android:textSize=\"14sp\"\r\n                android:textColor=\"#00425A\"\r\n                android:alpha=\"0.7\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/plantNameTextView\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:text=\"Monstera\\nAdansonii\"\r\n                android:textSize=\"32sp\"\r\n                android:textColor=\"#00425A\"\r\n                android:textStyle=\"bold\"\r\n                android:layout_marginTop=\"4dp\"/>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"horizontal\"\r\n                android:layout_marginTop=\"16dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_weight=\"1\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"AGE\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textColor=\"#00425A\"\r\n                        android:alpha=\"0.7\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/plantAgeTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"2w\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textColor=\"#00425A\"\r\n                        android:textStyle=\"bold\"\r\n                        android:layout_marginTop=\"4dp\"/>\r\n                </LinearLayout>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_weight=\"1\"\r\n                    android:orientation=\"vertical\"\r\n                    android:layout_marginStart=\"24dp\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"SIZE\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textColor=\"#00425A\"\r\n                        android:alpha=\"0.7\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/plantSizeTextView\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"30 cm\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textColor=\"#00425A\"\r\n                        android:textStyle=\"bold\"\r\n                        android:layout_marginTop=\"4dp\"/>\r\n                </LinearLayout>\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/plantImageView\"\r\n                    android:layout_width=\"130dp\"\r\n                    android:layout_height=\"130dp\"\r\n                    android:scaleType=\"centerCrop\"\r\n\r\n                    android:contentDescription=\"Hình ảnh cây\"\r\n                    android:layout_gravity=\"center_vertical\"\r\n                    android:layout_marginStart=\"16dp\"/>\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </androidx.cardview.widget.CardView>\r\n\r\n    <!-- Các Spinner chọn mùa và khu vực -->\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\"\r\n        android:paddingStart=\"16dp\"\r\n        android:paddingEnd=\"16dp\"\r\n        android:layout_marginTop=\"24dp\">\r\n\r\n        <!-- Spinner \"Chọn Mùa\" -->\r\n        <LinearLayout\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n\r\n            android:paddingStart=\"16dp\"\r\n            android:paddingEnd=\"16dp\"\r\n            android:paddingTop=\"12dp\"\r\n            android:paddingBottom=\"12dp\"\r\n            android:gravity=\"center_vertical\">\r\n\r\n            <Spinner\r\n                android:id=\"@+id/seasonSpinner\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                android:spinnerMode=\"dropdown\"\r\n                android:prompt=\"@string/choose_season\"\r\n                android:entries=\"@array/seasons\"\r\n\r\n                android:textColor=\"#00425A\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"normal\"\r\n                />\r\n        </LinearLayout>\r\n\r\n    </LinearLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"horizontal\"\r\n        android:paddingStart=\"16dp\"\r\n        android:paddingEnd=\"16dp\"\r\n        android:layout_marginTop=\"8dp\">\r\n\r\n        <!-- Spinner \"Chọn Khu vực\" -->\r\n        <LinearLayout\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_weight=\"1\"\r\n\r\n            android:paddingStart=\"16dp\"\r\n            android:paddingEnd=\"16dp\"\r\n            android:paddingTop=\"12dp\"\r\n            android:paddingBottom=\"12dp\"\r\n            android:gravity=\"center_vertical\">\r\n\r\n            <Spinner\r\n                android:id=\"@+id/citySpinner\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                android:spinnerMode=\"dropdown\"\r\n                android:prompt=\"@string/choose_city\"\r\n                android:entries=\"@array/cities\"\r\n\r\n                android:textColor=\"#00425A\"\r\n                android:textSize=\"16sp\"\r\n                android:textStyle=\"normal\"\r\n                />\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n    <!-- Nút \"Tạo hướng dẫn\" -->\r\n    <Button\r\n        android:id=\"@+id/createGuideButton\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"16dp\"\r\n        android:layout_marginEnd=\"16dp\"\r\n        android:layout_marginTop=\"32dp\"\r\n        android:text=\"Tạo hướng dẫn\"\r\n        android:textAllCaps=\"false\"\r\n        android:textColor=\"#FFFFFF\"\r\n        android:backgroundTint=\"#16A34A\"\r\n        android:insetTop=\"0dp\"\r\n        android:insetBottom=\"0dp\"/>\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_care_instruction.xml b/app/src/main/res/layout/activity_care_instruction.xml
--- a/app/src/main/res/layout/activity_care_instruction.xml	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
+++ b/app/src/main/res/layout/activity_care_instruction.xml	(date 1744972955552)
@@ -18,7 +18,7 @@
         android:paddingEnd="16dp"
         android:paddingBottom="8dp">
 
-        <!-- Spinner "Chọn cây của bạn" -->
+        <!-- Spinner "Chọn cây" -->
 
         <ImageView
             android:id="@+id/backButton"
@@ -148,7 +148,7 @@
         </LinearLayout>
     </androidx.cardview.widget.CardView>
 
-    <!-- Các Spinner chọn mùa và khu vực -->
+    <!--Spinner chọn mùa và khu vực -->
     <LinearLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
Index: app/src/main/java/com/example/myplantcare/viewmodels/ScheduleViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.myplantcare.viewmodels;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.myplantcare.data.repositories.ScheduleRepository;\r\nimport com.example.myplantcare.data.repositories.ScheduleRepositoryImpl;\r\nimport com.example.myplantcare.data.responses.ScheduleWithMyPlantInfo;\r\nimport com.example.myplantcare.models.ScheduleModel;\r\nimport com.example.myplantcare.utils.FirestoreCallback;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class ScheduleViewModel extends ViewModel {\r\n\r\n    private final ScheduleRepository scheduleRepository = new ScheduleRepositoryImpl();\r\n    private final MutableLiveData<Map<String, List<ScheduleWithMyPlantInfo>>> _todaySchedules = new MutableLiveData<>();\r\n    public MutableLiveData<Map<String, List<ScheduleWithMyPlantInfo>>> todaySchedules = _todaySchedules;\r\n    private final MutableLiveData<Boolean> _isLoading = new MutableLiveData<>(false);\r\n    public final LiveData<Boolean> isLoading = _isLoading;\r\n\r\n    private final MutableLiveData<String> _errorMessage = new MutableLiveData<>();\r\n    public final LiveData<String> errorMessage = _errorMessage;\r\n    public ScheduleViewModel(String userId) {\r\n        fetchTodaySchedules(userId);\r\n    }\r\n\r\n    public void fetchTodaySchedules(String userId) {\r\n        _isLoading.setValue(true);\r\n        scheduleRepository.getTodaySchedulesGroupedByTask(userId, new FirestoreCallback<Map<String, List<ScheduleWithMyPlantInfo>>>() {\r\n            @Override\r\n            public void onSuccess(Map<String, List<ScheduleWithMyPlantInfo>> data) {\r\n                _isLoading.postValue(false);\r\n                _todaySchedules.postValue(data != null ? data : new HashMap<>());\r\n            }\r\n\r\n            @Override\r\n            public void onError(Exception e) {\r\n                _isLoading.postValue(false);\r\n                _errorMessage.postValue(\"Lỗi khi tải lịch trình: \" + e.getMessage());\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/myplantcare/viewmodels/ScheduleViewModel.java b/app/src/main/java/com/example/myplantcare/viewmodels/ScheduleViewModel.java
--- a/app/src/main/java/com/example/myplantcare/viewmodels/ScheduleViewModel.java	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
+++ b/app/src/main/java/com/example/myplantcare/viewmodels/ScheduleViewModel.java	(date 1744971317923)
@@ -28,6 +28,7 @@
         fetchTodaySchedules(userId);
     }
 
+
     public void fetchTodaySchedules(String userId) {
         _isLoading.setValue(true);
         scheduleRepository.getTodaySchedulesGroupedByTask(userId, new FirestoreCallback<Map<String, List<ScheduleWithMyPlantInfo>>>() {
Index: .idea/deploymentTargetSelector.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
deleted file mode 100644
--- a/.idea/deploymentTargetSelector.xml	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
+++ /dev/null	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
@@ -1,24 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project version="4">
-  <component name="deploymentTargetSelector">
-    <selectionStates>
-      <SelectionState runConfigName="Unnamed">
-        <option name="selectionMode" value="DROPDOWN" />
-      </SelectionState>
-      <SelectionState runConfigName="MainActivity">
-        <option name="selectionMode" value="DROPDOWN" />
-      </SelectionState>
-      <SelectionState runConfigName="MainActivity (1)">
-        <option name="selectionMode" value="DROPDOWN" />
-        <DropdownSelection timestamp="2025-03-15T14:40:45.450281100Z">
-          <Target type="DEFAULT_BOOT">
-            <handle>
-              <DeviceId pluginId="PhysicalDevice" identifier="serial=a011ccd90507" />
-            </handle>
-          </Target>
-        </DropdownSelection>
-        <DialogSelection />
-      </SelectionState>
-    </selectionStates>
-  </component>
-</project>
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ExternalStorageConfigurationManager\" enabled=\"true\" />\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_23\" default=\"true\" project-jdk-name=\"23\" project-jdk-type=\"JavaSDK\" />\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 6af7c9b98a0d679f6c0b8ad6c3da9c58b09d03d1)
+++ b/.idea/misc.xml	(date 1744966622448)
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="ExternalStorageConfigurationManager" enabled="true" />
-  <component name="ProjectRootManager" version="2" languageLevel="JDK_23" default="true" project-jdk-name="23" project-jdk-type="JavaSDK" />
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="jbr-21" project-jdk-type="JavaSDK" />
 </project>
\ No newline at end of file
